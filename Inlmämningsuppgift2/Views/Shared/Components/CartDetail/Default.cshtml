@using Inlmämningsuppgift2.Models.Cart
@using Inlmämningsuppgift2.Models.User
@using Inlmämningsuppgift2.Repository
@using Inlmämningsuppgift2.Services
@using Microsoft.AspNetCore.Identity
@inject SignInManager<ApplicationUser> SignInManager
@inject UserManager<ApplicationUser> UserManager
@inject Cart Cart

@if (SignInManager.IsSignedIn(User))
{
    <div id="cart">
        @foreach (var line in Cart.CartLines)
        {
            if (line.Quantity>0)
            {
                <partial name="_CartLine" model="line" />
            }
        }
        <div>
            @Cart.CalcTotal(await UserManager.GetUserAsync(User))
        </div>
    </div>
    
}